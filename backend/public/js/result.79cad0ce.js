(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["result"],{1454:function(e,t,r){},"159b":function(e,t,r){var a=r("da84"),n=r("fdbc"),c=r("17c2"),i=r("9112");for(var o in n){var s=a[o],u=s&&s.prototype;if(u&&u.forEach!==c)try{i(u,"forEach",c)}catch(l){u.forEach=c}}},"17c2":function(e,t,r){"use strict";var a=r("b727").forEach,n=r("a640"),c=n("forEach");e.exports=c?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},2532:function(e,t,r){"use strict";var a=r("23e7"),n=r("5a34"),c=r("1d80"),i=r("ab13");a({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~String(c(this)).indexOf(n(e),arguments.length>1?arguments[1]:void 0)}})},"5a34":function(e,t,r){var a=r("44e7");e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},a15b:function(e,t,r){"use strict";var a=r("23e7"),n=r("44ad"),c=r("fc6a"),i=r("a640"),o=[].join,s=n!=Object,u=i("join",",");a({target:"Array",proto:!0,forced:s||!u},{join:function(e){return o.call(c(this),void 0===e?",":e)}})},a640:function(e,t,r){"use strict";var a=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&a((function(){r.call(null,t||function(){throw 1},1)}))}},ab13:function(e,t,r){var a=r("b622"),n=a("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(a){}}return!1}},b090:function(e,t,r){},d4d1:function(e,t,r){"use strict";r("1454")},d81d:function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").map,c=r("1dde"),i=c("map");a({target:"Array",proto:!0,forced:!i},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},eeac:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"result"}},[r("div",{attrs:{id:"page-header"}},[r("el-page-header",{attrs:{content:"Task Records"},on:{back:e.goBack}})],1),r("el-divider",{staticStyle:{magin:"0 1rem"}}),r("el-main",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"title",label:"Title","min-width":"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.title))])]}}])}),r("el-table-column",{attrs:{prop:"url",label:"Record Url","min-width":"200",align:"left"}}),r("el-table-column",{attrs:{prop:"status",label:"Record Status",width:"120",align:"center"}}),r("el-table-column",{attrs:{prop:"",label:"Extracted Text",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",disabled:["Failed","Input Error"].includes(t.row.status)},on:{click:function(r){return e.showResult(t.row._id)}}},[e._v("View")])]}}])}),r("el-table-column",{attrs:{prop:"",label:"",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.deleteRecord(t.$index,t.row._id)}}})]}}])})],1),r("el-pagination",{attrs:{"current-page":e.currentPage,id:"pagination",background:"",layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"Extracted Text",visible:e.extractedTextVisiable,width:"90%"},on:{"update:visible":function(t){e.extractedTextVisiable=t}}},[r("el-tree",{attrs:{data:e.treeData,props:e.defaultProps}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.extractedTextVisiable=!1}}},[e._v("Confirm")])],1)],1)],1)},n=[],c=(r("99af"),r("caad"),r("a15b"),r("d81d"),r("4fad"),r("b64b"),r("07ac"),r("2532"),r("159b"),r("53ca")),i=(r("96cf"),r("1da1")),o={created:function(){this.taskId=this.$route.query.id,this.refreshTable()},data:function(){return{taskId:"",currentPage:1,totalCount:1,tableData:[],extractedTextVisiable:!1,defaultProps:{children:"children",label:"label"},treeData:[]}},methods:{goBack:function(){this.$router.back()},refreshTable:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={0:"Pending",1:"Working",2:"Succeeded",3:"Failed",4:"Input Error"},e.next=3,this.axios.get("/task/".concat(this.taskId,"/record?page=").concat(this.currentPage));case 3:r=e.sent.data,a=r.records,n=r.totalCount,this.tableData=a.map((function(e){return e.status=t[e.status],e})),this.totalCount=n;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCurrentChange:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.currentPage=t,this.refreshTable();case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),showResult:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,i,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.treeData=[],r=["COUNT_TAGS","RETRIEVE_HEADER","RETRIEVE_FOOTER","RETRIEVE_BY_ID","RETRIEVE_BY_CLASS","RETRIEVE_BY_SELECTOR"],e.prev=2,e.next=5,this.axios.get("/record/".concat(t));case 5:a=e.sent.data,n=a.result,i=a.rules,this.visiableRules=i.map((function(e){return JSON.stringify(e)})),this.visiableResults=n,i.forEach((function(e,t){var a=Object.keys(e)[0];if(r.includes(a)){var i={label:a,children:[]};switch(a){case"COUNT_TAGS":var s=n[t];Object.entries(s).forEach((function(e){i.children.push({label:e.join(": ")})})),o.treeData.push(i);break;case"RETRIEVE_HEADER":case"RETRIEVE_FOOTER":var u=Object.values(e)[0];if("object"===Object(c["a"])(u)&&1===Object.keys(u).length&&["class","tag","id"].includes(Object.values(u)[0])&&(i.label+="_BY_".concat(Object.values(u)[0])),i.label.includes("_BY_id"))i.children.push({label:n[t]});else{var l=n[t];l.forEach((function(e){i.children.push({label:e})})),0===l.length&&i.children.push({label:""})}o.treeData.push(i);break;case"RETRIEVE_BY_ID":case"RETRIEVE_BY_CLASS":case"RETRIEVE_BY_SELECTOR":var d=Object.values(e)[0],h=n[t];d.forEach((function(e){var t={label:e,children:[]};"RETRIEVE_BY_ID"===a?t.children.push({label:h[e]}):t.children=h[e].map((function(e){return{label:e}})),i.children.push(t)})),o.treeData.push(i);break}}})),this.extractedTextVisiable=!0,e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](2),this.$message.error("Failed to show extracted text with error:".concat(e.t0.message));case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));function t(t){return e.apply(this,arguments)}return t}(),deleteRecord:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$alert("Deleting Record: ".concat(this.tableData[t].title),"Delete Record",{confirmButtonText:"Confirm",callback:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.axios.delete("/record/".concat(r));case 3:a.refreshTable(),a.$message({type:"info",message:"Deleted"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a.$message.error("Failed to delete record ".concat(r," with error:").concat(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()});case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()}},s=o,u=(r("f2d9"),r("d4d1"),r("2877")),l=Object(u["a"])(s,a,n,!1,null,"305f7dc0",null);t["default"]=l.exports},f2d9:function(e,t,r){"use strict";r("b090")}}]);
//# sourceMappingURL=result.79cad0ce.js.map